(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,a){e.exports=a(379)},379:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=a(17),m=a.n(i),l=a(39),s=a(161),u=a(162),d=a(171),p=a(163),h=a(172),f=a(58),y=a.n(f),w=a(10),E=a.n(w),v=a(34),g=a.n(v),b=a(11),x=a.n(b),C=a(57),N=a.n(C),T=a(33),j=a.n(T),W=a(169),M=a(60),k=M.object().shape({city:M.string().min(2,"Too short city name").matches(/(^[a-zA-Z\u0104\u0106\u0118\u0141\u0143\xd3\u015a\u0179\u017b\u0105\u0107\u0119\u0142\u0144\xf3\u015b\u017a\u017c\s]{2,}$)/i,"Invalid city name").required("This field is required"),country:M.string().min(2,"Too short country name").matches(/(^[a-zA-Z\u0104\u0106\u0118\u0141\u0143\xd3\u015a\u0179\u017b\u0105\u0107\u0119\u0142\u0144\xf3\u015b\u017a\u017c\s]{2,}$)/i,"Invalid country name").required("This field is required")}),O=function(e){var t=e.onSubmit,a=e.closeModal;return r.a.createElement(W.a,{validationSchema:k,initialValues:{city:"",country:""},onSubmit:function(e){t(e),a()}},function(e){var t=e.handleSubmit,a=e.handleChange,n=e.values,c=e.handleBlur,o=e.errors,i=e.touched;return r.a.createElement(x.a,{onSubmit:t,className:"m-3"},r.a.createElement(x.a.Row,null,r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"formCity"},r.a.createElement(x.a.Label,null,"City"),r.a.createElement(x.a.Control,{name:"city",type:"text",placeholder:"Enter city",onChange:a,value:n.city,onBlur:c,isInvalid:o.city&&i.city}),r.a.createElement(x.a.Control.Feedback,{type:"invalid"},o.city))),r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"formCountry"},r.a.createElement(x.a.Label,null,"Country"),r.a.createElement(x.a.Control,{name:"country",type:"text",placeholder:"Enter country",onChange:a,value:n.country,onBlur:c,isInvalid:o.country&&i.country}),r.a.createElement(x.a.Control.Feedback,{type:"invalid"},o.country)))),r.a.createElement(N.a,{type:"submit",variant:"secondary",block:!0},"Get Weather"))})},S=a(85),I=a.n(S),B=a(170),G=a(40),L=a.n(G),A=function(e){var t=e.addToCompare,a=Object(n.useState)(!1),c=Object(B.a)(a,2),o=c[0],i=c[1],m=function(){return i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{variant:"light",size:"sm",onClick:function(){return i(!0)}},"City comparison"),r.a.createElement(L.a,{show:o,onHide:m},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Add city to compare the weather")),r.a.createElement(L.a.Body,null,r.a.createElement(O,{closeModal:m,onSubmit:t}))))},F=function(e){var t=e.addToCompare,a=e.canCompare;return r.a.createElement(I.a,{bg:"dark",className:"mb-1"},r.a.createElement(y.a,{className:"d-flex justify-content-between"},r.a.createElement(I.a.Brand,{className:"text-white",href:"#home"},"weatherApp"),a&&r.a.createElement(A,{addToCompare:t})))},_=a(167),q=a.n(_),D=a(7),H=a.n(D),z=a(61),Z=a.n(z),$=function(e){var t=e.weather;return r.a.createElement(H.a,{className:Z.a.card},r.a.createElement("div",{className:Z.a.weatherIconWrapper},r.a.createElement("img",{className:Z.a.weatherIcon,src:"http://openweathermap.org/img/wn/".concat(t.iconCode,"@2x.png"),alt:""})),r.a.createElement(H.a.Body,{className:"p-2 p-sm-4"},r.a.createElement(H.a.Title,{className:"text-center"},t.dayOfWeek),r.a.createElement(E.a,{className:"d-flex justify-content-center m-0"},r.a.createElement(H.a.Text,{className:"m-0 font-weight-bold"},t.avgTemp," \xb0C")),r.a.createElement(E.a,{className:"d-flex justify-content-between m-0"},r.a.createElement(H.a.Text,{className:"m-0"},"Min. "),r.a.createElement(H.a.Text,{className:"m-0"},t.minTemp," \xb0C")),r.a.createElement(E.a,{className:"d-flex justify-content-between m-0"},r.a.createElement(H.a.Text,{className:"m-0"},"Max. "),r.a.createElement(H.a.Text,{className:"m-0"},t.maxTemp," \xb0C")),r.a.createElement(E.a,{className:"d-flex justify-content-between mt-1 mx-0"},r.a.createElement(H.a.Text,{className:"m-0"},"Clouds "),r.a.createElement(H.a.Text,{className:"m-0"},t.avgClouds," % ")),r.a.createElement(E.a,{className:"d-flex justify-content-between mt-1 mx-0"},r.a.createElement(H.a.Text,{className:"m-0"},"Wind "),r.a.createElement(H.a.Text,{className:"m-0"},t.avgWind," m/s ")),r.a.createElement(E.a,{className:"d-flex justify-content-between mt-1 mx-0"},r.a.createElement(H.a.Text,{className:"m-0"},"Humid."),r.a.createElement(H.a.Text,{className:"m-0"},t.avgHumidity," % "))))},J=function(e){var t=e.weather;return r.a.createElement(E.a,null,t.map(function(e){return r.a.createElement(j.a,{key:q()(),lg:!0,md:4,xs:6},r.a.createElement($,{weather:e}))}))},P=a(173),R=a(87),U=a(86),V=a.n(U),K=a(168),Q=a.n(K),X="2d3f3209d60edcc35fc7d1abb01d7cb0",Y=function(e,t){var a="https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,",").concat(t,"&units=metric&appid=").concat(X);return V.a.get(a).then(function(e){return e}).catch(function(e){return e})},ee=function(e,t){var a="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e,"&lon=").concat(t,"&units=metric&appid=").concat(X);return V.a.get(a).then(function(e){return e}).catch(function(e){return e})},te=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},ae=function(e){return e.reduce(function(e,t){return e+t})/e.length},ne=function(e){return Object.values(e).map(function(e){var t,a=e.length<8?e[0].weather[0].icon:e[5].weather[0].icon;return Object(P.a)({iconCode:a,dayOfWeek:Q()(1e3*e[0].dt).format("dddd")},function(e){var t=e.map(function(e){return e.main.temp}),a=te(Math.max.apply(Math,Object(R.a)(t)),0),n=te(Math.min.apply(Math,Object(R.a)(t)),0),r=te(ae(e.map(function(e){return e.wind.speed})),1);return{maxTemp:a,minTemp:n,avgHumidity:te(ae(e.map(function(e){return e.main.humidity})),0),avgClouds:te(ae(e.map(function(e){return e.clouds.all})),0),avgWind:r}}(e),{avgTemp:(t=e,t.length<8?te(t[0].main.temp,0):te(t[4].main.temp,0))})})},re=function(e){var t=function(e){var t={0:[],1:[],2:[],3:[],4:[]},a=Object.keys(t).length,n=0,r=new Date(1e3*e[0].dt).getDay();return e.forEach(function(e){var c=new Date(1e3*e.dt).getDay();c!=r&&(n++,r=c),n<a&&t[n].push(e)}),t}(e);return ne(t)},ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={weather:[],weatherCompare:[],city:"",cityCompare:"",isGeoLoc:!0,errorMsg:"",errorMsgCompare:""},a.handleSubmitWeather=function(){var e=Object(l.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getWeather(t);case 2:(n=e.sent).err?a.setState({weather:[],city:"",errorMsg:n.errorMsg}):a.setState({weather:n.weather,city:n.city,errorMsg:"",isGeoLoc:!1});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitCompareWeather=function(){var e=Object(l.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getWeather(t);case 2:(n=e.sent).err?a.setState({weatherCompare:[],cityCompare:"",errorMsgCompare:n.errorMsg}):a.setState({weatherCompare:n.weather,cityCompare:n.city,errorMsgCompare:""});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getWeatherFromGeoLoc=function(){var e=function(){var e=Object(l.a)(m.a.mark(function e(t){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t.coords.latitude,t.coords.longitude);case 2:n=e.sent,r=re(n.data.list),a.setState({weather:r,city:n.data.city.name});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();navigator.geolocation.getCurrentPosition(e,function(e){return a.setState({isGeoLoc:!1}),e},{timeout:3e3,maximumAge:0})},a.getWeather=function(){var e=Object(l.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t.city,t.country);case 3:return a=e.sent,n=re(a.data.list),r=a.data.city.name,e.abrupt("return",{err:!1,weather:n,city:r});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{err:!0,errorMsg:"Couldn't get weather, check spelling"});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getWeatherFromGeoLoc()}},{key:"render",value:function(){var e=this.state,t=e.weather,a=e.city,n=e.isGeoLoc,c=e.errorMsg,o=e.weatherCompare,i=e.errorMsgCompare,m=e.cityCompare;return r.a.createElement("div",{className:"App"},r.a.createElement(F,{canCompare:a,addToCompare:this.handleSubmitCompareWeather}),r.a.createElement(y.a,null,r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(O,{onSubmit:this.handleSubmitWeather})),n&&a&&r.a.createElement(g.a,{variant:"secondary",className:"text-center"},"Forecast weather based on geolocation -"," ",r.a.createElement("span",{className:"font-weight-bold"},a)),a&&!n&&r.a.createElement(g.a,{variant:"secondary",className:"text-center"},"Forecast weather based on user Input -"," ",r.a.createElement("span",{className:"font-weight-bold"},a)),c&&r.a.createElement(g.a,{variant:"danger",className:"text-center"},c),t&&r.a.createElement(J,{weather:t}),i&&r.a.createElement(g.a,{variant:"danger",className:"text-center"},i),m&&r.a.createElement(g.a,{variant:"secondary",className:"text-center"},"Forecast weather based on user Input -"," ",r.a.createElement("span",{className:"font-weight-bold"},m)),o&&r.a.createElement(J,{weather:o})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,a){e.exports={weatherIconWrapper:"WeatherCard_weatherIconWrapper__NA697",card:"WeatherCard_card__3UZLx"}}},[[174,1,2]]]);
//# sourceMappingURL=main.d768dea8.chunk.js.map